{
    "metadata": {
        "spec_version": 1,
        "kind": "blueprint",
        "name": "SimpleLampBlueprint",
        "categories": {}
    },
    "spec": {
        "name": "SimpleLampBlueprint",
        "description": "Simple blueprint Spec",
        "resources": {
            "service_definition_list": [
                {
                    "name": "VmDeploymentService",
                    "description": "Single VM service",
                    "port_list": [],
                    "singleton": false,
                    "tier": "",
                    "depends_on_list": [],
                    "variable_list": [],
                    "container_spec": {},
                    "action_list": [
                        {
                            "name": "action_create",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_VmDeploymentService_action_create",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_VmDeploymentService_action_create"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_VmDeploymentService_action_create",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "VmDeploymentService"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": [],
                                        "retries": "",
                                        "timeout_secs": ""
                                    }
                                ],
                                "variable_list": []
                            }
                        },
                        {
                            "name": "action_delete",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_VmDeploymentService_action_delete",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_VmDeploymentService_action_delete"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_VmDeploymentService_action_delete",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "VmDeploymentService"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": [],
                                        "retries": "",
                                        "timeout_secs": ""
                                    }
                                ],
                                "variable_list": []
                            }
                        },
                        {
                            "name": "action_start",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_VmDeploymentService_action_start",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_VmDeploymentService_action_start"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_VmDeploymentService_action_start",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "VmDeploymentService"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": [],
                                        "retries": "",
                                        "timeout_secs": ""
                                    }
                                ],
                                "variable_list": []
                            }
                        },
                        {
                            "name": "action_stop",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_VmDeploymentService_action_stop",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_VmDeploymentService_action_stop"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_VmDeploymentService_action_stop",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "VmDeploymentService"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": [],
                                        "retries": "",
                                        "timeout_secs": ""
                                    }
                                ],
                                "variable_list": []
                            }
                        },
                        {
                            "name": "action_restart",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_VmDeploymentService_action_restart",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_VmDeploymentService_action_restart"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_VmDeploymentService_action_restart",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "VmDeploymentService"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": [],
                                        "retries": "",
                                        "timeout_secs": ""
                                    }
                                ],
                                "variable_list": []
                            }
                        },
                        {
                            "name": "action_soft_delete",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_VmDeploymentService_action_soft_delete",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_VmDeploymentService_action_soft_delete"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_VmDeploymentService_action_soft_delete",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "VmDeploymentService"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": [],
                                        "retries": "",
                                        "timeout_secs": ""
                                    }
                                ],
                                "variable_list": []
                            }
                        }
                    ]
                }
            ],
            "package_definition_list": [
                {
                    "name": "VmDeploymentPackage",
                    "description": "",
                    "type": "CUSTOM",
                    "options": {
                        "install_runbook": {
                            "name": "Runbook_for_Package_VmDeploymentPackage_action_install",
                            "description": "",
                            "main_task_local_reference": {
                                "kind": "app_task",
                                "name": "DAG_Task_for_Package_VmDeploymentPackage_action_install"
                            },
                            "task_definition_list": [
                                {
                                    "name": "DAG_Task_for_Package_VmDeploymentPackage_action_install",
                                    "description": "",
                                    "type": "DAG",
                                    "target_any_local_reference": {
                                        "kind": "app_service",
                                        "name": "VmDeploymentService"
                                    },
                                    "attrs": {
                                        "edges": []
                                    },
                                    "child_tasks_local_reference_list": [],
                                    "variable_list": [],
                                    "retries": "",
                                    "timeout_secs": ""
                                }
                            ],
                            "variable_list": []
                        },
                        "uninstall_runbook": {
                            "name": "Runbook_for_Package_VmDeploymentPackage_action_uninstall",
                            "description": "",
                            "main_task_local_reference": {
                                "kind": "app_task",
                                "name": "DAG_Task_for_Package_VmDeploymentPackage_action_uninstall"
                            },
                            "task_definition_list": [
                                {
                                    "name": "DAG_Task_for_Package_VmDeploymentPackage_action_uninstall",
                                    "description": "",
                                    "type": "DAG",
                                    "target_any_local_reference": {
                                        "kind": "app_service",
                                        "name": "VmDeploymentService"
                                    },
                                    "attrs": {
                                        "edges": []
                                    },
                                    "child_tasks_local_reference_list": [],
                                    "variable_list": [],
                                    "retries": "",
                                    "timeout_secs": ""
                                }
                            ],
                            "variable_list": []
                        }
                    },
                    "service_local_reference_list": [
                        {
                            "kind": "app_service",
                            "name": "VmDeploymentService"
                        }
                    ],
                    "variable_list": [],
                    "version": ""
                },
                {
                    "name": "centos_disk",
                    "description": "",
                    "type": "SUBSTRATE_IMAGE",
                    "options": {
                        "name": "centos_disk",
                        "description": "",
                        "resources": {
                            "image_type": "DISK_IMAGE",
                            "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-1810.qcow2",
                            "architecture": "X86_64",
                            "version": {
                                "product_version": "1.0",
                                "product_name": "centos_disk"
                            },
                            "checksum": {}
                        }
                    },
                    "service_local_reference_list": [],
                    "variable_list": [],
                    "action_list": [],
                    "version": ""
                }
            ],
            "substrate_definition_list": [
                {
                    "name": "VmDeploymentSubstrate",
                    "description": "",
                    "type": "AHV_VM",
                    "os_type": "Linux",
                    "create_spec": {
                        "name": "@@{calm_application_name}@@-@@{calm_array_index}@@",
                        "resources": {
                            "boot_config": {
                                "boot_device": {
                                    "disk_address": {
                                        "adapter_type": "SCSI",
                                        "device_index": 0
                                    }
                                }
                            },
                            "disk_list": [
                                {
                                    "data_source_reference": {
                                        "kind": "image",
                                        "name": "Centos7",
                                        "uuid": "294fa133-be65-4393-aae8-e3b10a0b4293"
                                    },
                                    "device_properties": {
                                        "device_type": "DISK",
                                        "disk_address": {
                                            "adapter_type": "SCSI",
                                            "device_index": 0
                                        }
                                    },
                                    "disk_size_mib": 0
                                }
                            ],
                            "memory_size_mib": 1024,
                            "nic_list": [
                                {
                                    "network_function_nic_type": "INGRESS",
                                    "nic_type": "NORMAL_NIC",
                                    "subnet_reference": {
                                        "kind": "subnet",
                                        "uuid": "fbc15051-dfc0-4f37-a4ef-8bd761257f44"
                                    }
                                }
                            ],
                            "num_sockets": 1,
                            "num_vcpus_per_socket": 1,
                            "power_state": "ON"
                        }
                    },
                    "variable_list": [],
                    "action_list": [],
                    "readiness_probe": {
                        "connection_type": "SSH",
                        "connection_port": 22,
                        "connection_protocol": "",
                        "timeout_secs": "",
                        "delay_secs": "60",
                        "retries": "5",
                        "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                        "disable_readiness_probe": true
                    },
                    "editables": {}
                }
            ],
            "credential_definition_list": [
                {
                    "name": "default cred",
                    "description": "",
                    "type": "PASSWORD",
                    "username": "root",
                    "secret": {
                        "attrs": {
                            "is_secret_modified": true
                        },
                        "value": "passwd"
                    },
                    "cred_class": "static",
                    "editables": {}
                }
            ],
            "app_profile_list": [
                {
                    "name": "SimpleLampBlueprintProfile",
                    "deployment_create_list": [
                        {
                            "published_service_local_reference_list": [],
                            "package_local_reference_list": [
                                {
                                    "kind": "app_package",
                                    "name": "VmDeploymentPackage"
                                }
                            ],
                            "substrate_local_reference": {
                                "kind": "app_substrate",
                                "name": "VmDeploymentSubstrate"
                            },
                            "depends_on_list": [],
                            "variable_list": [],
                            "action_list": [],
                            "min_replicas": "1",
                            "default_replicas": "",
                            "max_replicas": "1",
                            "type": "GREENFIELD",
                            "name": "VmDeployment",
                            "options": {},
                            "description": "",
                            "editables": {}
                        }
                    ],
                    "variable_list": [],
                    "action_list": []
                }
            ],
            "published_service_definition_list": [],
            "default_credential_local_reference": {
                "kind": "app_credential",
                "name": "default cred"
            }
        }
    }
}